<table class="list">
  <thead><tr>
  <%= sort_header_tag('id', :caption => '#') %>
  <%= sort_header_tag('name',
    :caption => l(:field_device_name),
    :default_order => 'asc') %>
  <%= sort_header_tag('vendor',
    :caption => l(:field_device_vendor)) %>
  <%= sort_header_tag('model',
    :caption => l(:field_device_model)) %>
  <%= sort_header_tag('manufactured_on',
    :caption => l(:field_manufactured_on)) %>
  <%= sort_header_tag('holder_id',
    :caption => l(:field_holder)) %>
  <%= sort_header_tag('holder_change_histories_count', 
    :caption => l(:field_holder_change_histories_count)) %>
  <%= sort_header_tag('reviews_count',
    :caption => l(:field_reviews_count)) %>
  </tr></thead>
  <tbody>
<% for device in treasures -%>
  <tr class="<%= cycle('odd', 'even') %>">
  <td><%= device.id %></td>
  <td><%= link_to device.name,
    :action => 'show',
    :id => device %></td>
  <td><%= device.vendor %></td>
  <td><%= device.model %></td>
  <td><%= device.manufactured_on %></td>
  <td><%= device.holder ? link_to_user(device.holder) : '-' %></td>
  <td>
    <% if device.holder_change_histories_count > 1 %>
      <%= device.holder_change_histories_count - 1 %>
      (<%= link_to(l(:button_view),
        :action => 'show',
        :id => device,
        :type => 'histories'
      ) %>)
    <% else %>
      0
    <% end %>
  </td>
  <td>
    <% if device.reviews_count > 0 %>
      <%= device.reviews_count %>
      (<%= link_to(l(:button_view),
        :action => 'show',
        :anchor => 'reviews',
        :id => device
      ) %>)
    <% else %>
      0
    <% end %>
  </td>
  </tr>
<% end -%>
  </tbody>
</table>
